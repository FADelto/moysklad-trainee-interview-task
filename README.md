# Тестовое задание
#### Также документация есть по адресу: `localhost:8080/swagger-ui/index.html`
[Само задание](https://github.com/moysklad/trainee-interview-task) 
## Документация API

**Стандартный путь для api:**  `/api/v1`
### Эндпоинты управления продуктами `/product`

#### 1. Создание продукта
- **Эндпоинт:** `POST /create`
- **Описание:** Создает новый продукт.
- **Тело запроса:** Требуется JSON объект типа `Product`.
- **Ответы:**
    - `200 OK`: Продукт успешно создан. Возвращает созданный продукт.
    - `412 Precondition Failed`: Ошибка валидации (например, отрицательная цена, неверное описание или название продукта). Возвращает информацию об ошибке.

#### 2. Получение всех продуктов
- **Эндпоинт:** `GET /getall`
- **Описание:** Возвращает список всех продуктов.
- **Ответы:**
    - `200 OK`: Успешно. Возвращает массив продуктов.

#### 3. Получение продукта по ID
- **Эндпоинт:** `GET /getById`
- **Описание:** Возвращает продукт по его идентификатору (ID).
- **Параметры:**
    - `id`: ID продукта.
- **Ответы:**
    - `200 OK`: Успешно. Возвращает продукт.

#### 4. Получение продукта по имени
- **Эндпоинт:** `GET /getByName`
- **Описание:** Возвращает продукт по его имени.
- **Параметры:**
    - `name`: Имя продукта.
- **Ответы:**
    - `200 OK`: Успешно. Возвращает продукт.

#### 5. Обновление продукта
- **Эндпоинт:** `PATCH /update`
- **Описание:** Обновляет существующий продукт.
- **Тело запроса:** Требуется JSON объект типа `Product`.
- **Параметры:**
    - `id`: ID продукта для обновления.
- **Ответы:**
    - `200 OK`: Продукт успешно обновлен. Возвращает обновленный продукт.
    - `404 Not Found`: Продукт с указанным ID не найден.
    - `412 Precondition Failed`: Ошибка валидации (например, отрицательная цена, неверное описание или название продукта). Возвращает информацию об ошибке.

#### 6. Удаление продукта по ID
- **Эндпоинт:** `DELETE /remove`
- **Описание:** Удаляет продукт по его ID.
- **Параметры:**
    - `id`: ID продукта для удаления.
- **Ответы:**
    - `200 OK`: Продукт успешно удален.
    - `404 Not Found`: Продукт с указанным ID не найден.

#### 7. Поиск продуктов по фильтру и сортировка с ограничением выдачи
- **Эндпоинт:** `GET /filter`
- **Описание:** Возвращает продукты на основе фильтра и сортирует их с ограничением выдачи.
- **Параметры:**
  - `name`: Поиск по имени продукта.
  - `minPrice`: Минимальная цена продукта.
  - `maxPrice`: Максимальная цена продукта.
  - `inStock`: Поиск по наличию продукта.
  - `orderSelect`: Сортировка по имени (`name`) или по цене (`price`).
  - `orderDirectionAsc`: Направление сортировки по возрастанию (`true`) или по убыванию (`false`).
  - `limit`: Лимит выборки записей.
- **Ответы:**
  - `200 OK`: Успешно. Возвращает массив продуктов, соответствующих критериям поиска.

### Эндпоинты управления поставками `/productsupply`

#### 1. Создать поставку
- **Эндпоинт:** `POST /create`
- **Описание:** Создает новую поставку.
- **Тело запроса:** Требуется JSON объект типа `ProductSupplyDTO`.
- **Ответы:**
  - `200 OK`: Поставка успешно создана.
  - `404 Not Found`: Поставка товара с таким id не найдена или неверный id продукта.
  - `412 Precondition Failed`: Ошибка валидации (например, количество поставленных товаров отрицательное или равняется нулю, либо название документа не соответствует требованиям). Возвращает информацию об ошибке.

#### 2. Получить все поставки
- **Эндпоинт:** `GET /getall`
- **Описание:** Возвращает список всех поставок.
- **Ответы:**
  - `200 OK`: Успешно. Возвращает массив поставок.

#### 3. Получить поставку по id
- **Эндпоинт:** `GET /getById`
- **Описание:** Возвращает поставку по ее идентификатору (id).
- **Параметры:**
  - `id`: ID поставки.
- **Ответы:**
  - `200 OK`: Успешно. Возвращает поставку.

#### 4. Обновить поставку
- **Эндпоинт:** `PATCH /update`
- **Описание:** Обновляет существующую поставку.
- **Тело запроса:** Требуется JSON объект типа `ProductSupplyDTO`.
- **Параметры:**
  - `id`: ID поставки для обновления.
- **Ответы:**
  - `200 OK`: Поставка успешно обновлена.
  - `404 Not Found`: Поставка с указанным ID не найдена или неверный id продукта.
  - `412 Precondition Failed`: Ошибка валидации (например, количество поставленных товаров отрицательное или равняется нулю, либо название документа не соответствует требованиям). Возвращает информацию об ошибке.

#### 5. Удалить поставку по id
- **Эндпоинт:** `DELETE /remove`
- **Описание:** Удаляет поставку по ее ID.
- **Параметры:**
  - `id`: ID поставки для удаления.
- **Ответы:**
  - `200 OK`: Поставка успешно удалена.
  - `404 Not Found`: Поставка с указанным ID не найдена или неверный id продукта.

### Эндпоинты управления продажами `/productsales`

#### 1. Создать продажу
- **Эндпоинт:** `POST /create`
- **Описание:** Создает новую продажу.
- **Тело запроса:** Требуется JSON объект типа `ProductSaleDTO`.
- **Ответы:**
  - `200 OK`: Продажа успешно создана.
  - `404 Not Found`: Продажа товара с таким id не найдена или неверный id продукта.
  - `412 Precondition Failed`: Ошибка валидации (например, количество проданных товаров отрицательное или равняется нулю, либо название документа не соответствует требованиям). Возвращает информацию об ошибке.

#### 2. Получить все продажи
- **Эндпоинт:** `GET /getall`
- **Описание:** Возвращает список всех продаж.
- **Ответы:**
  - `200 OK`: Успешно. Возвращает массив продаж.

#### 3. Получить продажу по id
- **Эндпоинт:** `GET /getById`
- **Описание:** Возвращает продажу по ее идентификатору (id).
- **Параметры:**
  - `id`: ID продажи.
- **Ответы:**
  - `200 OK`: Успешно. Возвращает продажу.

#### 4. Обновить информацию о продаже
- **Эндпоинт:** `PATCH /update`
- **Описание:** Обновляет информацию о продаже.
- **Тело запроса:** Требуется JSON объект типа `ProductSaleDTO`.
- **Параметры:**
  - `id`: ID продажи для обновления.
- **Ответы:**
  - `200 OK`: Продажа успешно обновлена.
  - `404 Not Found`: Продажа товара с таким id не найдена или неверный id продукта.
  - `412 Precondition Failed`: Ошибка валидации (например, количество проданных товаров отрицательное или равняется нулю, либо название документа не соответствует требованиям). Возвращает информацию об ошибке.

#### 5. Удалить продажу по id
- **Эндпоинт:** `DELETE /remove`
- **Описание:** Удаляет продажу по ее ID.
- **Параметры:**
  - `id`: ID продажи для удаления.
- **Ответы:**
  - `200 OK`: Продажа успешно удалена.
  - `404 Not Found`: Продажа с указанным ID не найдена или неверный id продукта.
  - `412 Precondition Failed`: Ошибка валидации (например, количество товара не может быть меньше 0). Возвращает информацию об ошибке.

## Для запуска при помощи Docker:

- Создать образ: `docker compose build`

- Запуск приложения: `docker compose up`